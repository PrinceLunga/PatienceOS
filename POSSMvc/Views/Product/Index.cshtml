@model IEnumerable<POSSMvc.Models.Product>
@{ Layout = "_Layout"; ViewBag.Title = "All Products";}

<h2>All Items</h2>
<a asp-action="AddItem" class="btn btn-sm btn-primary">Add Item</a>
<a asp-action="GetItem" class="btn btn-sm btn-secondary">Get Item</a>
<table class="table table-sm table-striped table-bordered m-2">
    <thead><tr><th>ID</th><th>Name</th><th>Group</th><th>Sub Group</th><th>Status</th><th>Price</th><th>Quantity</th> <th>Image</th><th>Actions</th></tr></thead>
    <tbody>
        @foreach (var r in Model)
        {
        <tr>
            <td>@r.Id</td>
            <td>@r.Name</td>
            <td>@r.Group</td>
            <td>@r.SubGroup</td>
            <td>@r.Status</td>
            <td>@r.Price</td>
            <td>@r.Quantity</td>
            <td>@r.Description</td>
            <td>
                @r.Description
            </td>
            <td>
                @{
                    var base64 = Convert.ToBase64String(r.Image);
                    var imgsrc = String.Format("data:image/gif;base64,{0}", base64);
                }
                <img src="@imgsrc" width="400" height="200" />
            </td>
        <td>
            <a asp-action="UpdateProduct" class="btn btn-sm btn-primary" asp-route-id="@r.Id">Update Item</a>
        </td>
        <td>
            <a asp-controller="Cart" asp-action="AddItemToCart"  asp-route-id="@r.Id"> Add to Cart</a>
        </td>
        </tr>
        }
    </tbody>
</table>
